<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Te lo diría, pero…</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Pacifico&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: #e6e0f8;
      color: #4b367c;
      margin: 0; padding: 1rem;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
    }
    h1 {
      font-family: 'Pacifico', cursive;
      font-size: 2.5rem;
      margin-bottom: 0.25rem;
      color: #7c59c9;
    }
    .subtitle {
      margin-top: 0;
      margin-bottom: 2rem;
      font-weight: 600;
      color: #6d5cae;
      text-align: center;
      max-width: 420px;
    }
    form {
      background: #d9cffb;
      padding: 1.5rem 2rem;
      border-radius: 12px;
      box-shadow: 0 6px 16px rgba(106,75,154,0.25);
      max-width: 420px;
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 1rem;
      box-sizing: border-box;
    }
    input[type="text"], textarea {
      font-family: 'Poppins', sans-serif;
      font-size: 1.15rem;
      padding: 1rem 1.2rem;
      border: 2px solid #9b80e5;
      border-radius: 8px;
      outline-offset: 2px;
      transition: border-color 0.3s ease;
      resize: vertical;
      background: #f5f0ff;
      color: #4b367c;
      min-height: 3.5rem;
    }
    input[type="text"]:focus, textarea:focus {
      border-color: #7c59c9;
      background: #e9e3ff;
    }
    button {
      background: #7c59c9;
      color: white;
      font-weight: 700;
      font-size: 1.25rem;
      padding: 1rem;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      box-shadow: 0 5px 10px rgba(124,89,201,0.6);
      transition: background-color 0.3s ease;
      user-select: none;
    }
    button:hover, button:focus {
      background: #a18be7;
      outline: none;
      box-shadow: 0 0 8px 3px #a18be7;
    }
    .output {
      margin-top: 2rem;
      background: #d9cffb;
      padding: 1.5rem 2rem;
      border-radius: 12px;
      box-shadow: 0 6px 16px rgba(106,75,154,0.25);
      max-width: 420px;
      width: 100%;
      text-align: center;
      word-break: break-word;
    }
    .output a {
      color: #4b367c;
      font-weight: 600;
      text-decoration: none;
      word-break: break-all;
    }
    .output a:hover, .output a:focus {
      text-decoration: underline;
    }
    .qr {
      margin-top: 1rem;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 12px;
      position: relative;
    }
    .qr-gato {
      width: 40px;
      height: 40px;
      background-image: url('gatito.png');
      background-size: contain;
      background-repeat: no-repeat;
      animation: gatoBailoteo 4s ease-in-out infinite;
      cursor: default;
    }
    @keyframes gatoBailoteo {
      0%, 100% { transform: translateX(0) rotate(0deg); }
      25% { transform: translateX(5px) rotate(3deg); }
      50% { transform: translateX(10px) rotate(-3deg); }
      75% { transform: translateX(5px) rotate(3deg); }
    }
    .cele-easteregg {
      position: absolute;
      bottom: 12px;
      right: 12px;
      width: 60px;
      height: 60px;
      animation: gatoBailoteo 4s ease-in-out infinite;
      cursor: pointer;
      transition: transform 0.3s ease;
      z-index: 9999;
    }
    .cele-easteregg:hover {
      transform: scale(1.2) rotate(10deg);
    }
    @media (max-width: 480px) {
      .qr-gato {
        width: 30px;
        height: 30px;
      }
    }
  </style>
</head>
<body>

  <h1>Te lo diría, pero…</h1>
  <p class="subtitle">Dedicatorias cortas y bonitas para gente especial.</p>

  <form id="dedicationForm">
    <input type="text" id="toInput" placeholder="Para quién va" required />
    <input type="text" id="fromInput" placeholder="De parte de" required />
    <textarea id="messageInput" placeholder="Tu dedicatoria" rows="4" required></textarea>
    <button type="submit">Crear dedicatoria</button>
  </form>

  <div class="output" id="output" style="display:none;"></div>

  <div class="qr" id="qrContainer" style="display:none;">
    <div class="qr-gato"></div>
    <div id="qrCode"></div>
  </div>

  <script>
    // Objeto con dedicatorias predefinidas y sus claves cortas
    const dedicatorias = {
      abc123: {
        to: "Alguien",
        from: "Cele",
        message: "Te quiero un montón, sos increíble en todo lo que hacés."
      },
      xyz789: {
        to: "Conejo Olimpico",
        from: "Tu fan",
        message: "Sos un crack en matemáticas y me inspirás cada día."
      }
    };

    // Función para obtener parámetro 'd' de la URL
    function getDedicationKey() {
      const params = new URLSearchParams(window.location.search);
      return params.get('d');
    }

    // Función para mostrar dedicatoria en pantalla
    function showDedication(data) {
      const output = document.getElementById('output');
      const qrContainer = document.getElementById('qrContainer');
      const form = document.getElementById('dedicationForm');
      form.style.display = 'none';
      output.style.display = 'block';
      qrContainer.style.display = 'flex';

      output.innerHTML = `
        <p><strong>Para:</strong> ${data.to}</p>
        <p><strong>De:</strong> ${data.from}</p>
        <p>${data.message}</p>
      `;

      // Generar link corto para compartir (ejemplo: https://tusitio.com/?d=clave)
      const url = `${window.location.origin}${window.location.pathname}?d=${encodeURIComponent(data.key)}`;

      // Mostrar link para compartir
      const linkEl = document.createElement('a');
      linkEl.href = url;
      linkEl.textContent = url;
      output.appendChild(document.createElement('br'));
      output.appendChild(document.createTextNode('Compartí tu dedicatoria: '));
      output.appendChild(linkEl);

      // Mostrar QR (generado con Google Chart API)
      const qrCodeDiv = document.getElementById('qrCode');
      qrCodeDiv.innerHTML = ''; // limpiar antes
      const qrImg = document.createElement('img');
      const qrURL = `https://chart.googleapis.com/chart?cht=qr&chs=150x150&chl=${encodeURIComponent(url)}`;
      qrImg.src = qrURL;
      qrImg.alt = "QR de la dedicatoria";
      qrImg.style.width = "150px";
      qrImg.style.height = "150px";
      qrCodeDiv.appendChild(qrImg);

      // Easter egg si viene de 'cele'
      if (data.from.toLowerCase().includes('cele')) {
        const logo = document.createElement('a');
        logo.href = "https://www.instagram.com/dice.cele_sketch/";
        logo.target = "_blank";
        logo.rel = "noopener noreferrer";
        logo.className = 'cele-easteregg';
        logo.setAttribute('aria-label', 'Instagram de Cele');
        const img = document.createElement('img');
        img.src = 'cele.png';
        img.alt = 'Logo de Cele';
        img.style.width = '100%';
        img.style.height = 'auto';
        logo.appendChild(img);
        document.body.appendChild(logo);
      }
    }

    // Al cargar, chequear si hay dedicatoria por URL
    window.addEventListener('DOMContentLoaded', () => {
      const key = getDedicationKey();
      if (key && dedicatorias[key]) {
        // Añadimos la key al objeto para el link
        dedicatorias[key].key = key;
        showDedication(dedicatorias[key]);
      }
    });

    // Manejar formulario para crear nueva dedicatoria con link corto simulado
    document.getElementById('dedicationForm').addEventListener('submit', e => {
      e.preventDefault();

      const to = document.getElementById('toInput').value.trim();
      const from = document.getElementById('fromInput').value.trim();
      const message = document.getElementById('messageInput').value.trim();

      if (!to || !from || !message) {
        alert('Por favor, completa todos los campos.');
        return;
      }

      // Generar clave corta random (6 caracteres alfanuméricos)
      const key = Math.random().toString(36).substring(2, 8);

      const data = { to, from, message, key };

      // Guardar en dedicatorias para que pueda cargar con link (en app real, esto sería backend)
      dedicatorias[key] = data;

      showDedication(data);

      // Limpiar formulario (opcional)
      e.target.reset();
    });
  </script>
</body>
</html>









